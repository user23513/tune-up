<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">
<title>전자결재 - 나의 신청</title>
<script src="/js/jquery-3.6.1.min.js"></script>
<link rel="stylesheet"
	href="https://cdn.datatables.net/v/dt/dt-1.11.4/r-2.2.9/datatables.min.css" />
<script
	src="https://cdn.datatables.net/v/dt/dt-1.11.4/r-2.2.9/datatables.min.js"></script>


<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/v/bs5/dt-1.12.1/datatables.min.css" />

<script type="text/javascript"
	src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript"
	src="https://cdn.datatables.net/v/bs5/dt-1.12.1/datatables.min.js"></script>
<script>
	$(document).ready(function() {
		
		aprvSelect();
		
		//datatables
		$('#aprvTable').DataTable({
			//컬럼 갯수
			colums: [
				{data:"aprvNo"},
				{data:"ttl"},
				{data:"dttm"},
				{data:"aprvSt"}
			],
			//컬럼 넓이
			columnDefs: [
				{targets:0, width:20},
				{targets:1, width:400},
				{targets:2, width:50},
				{targets:3, width:50}
			],
			//표시 건수 기능 숨기기
			lengthChange: false,
			//정렬 기능 숨기기
			ordering: false,
			//정보 표시 숨기기
			info: false
		});
		
		//상세조회
		function aprvSelect() {
			$("#tb").on("click", ".select", e=>{
				let no = $(e.target).data("no"); 
				$("#aprvNo").val(no)
				$("#frm").submit();
			})
		}
		
	

		
	} );
</script>
<style>
.dataTables_wrapper .dataTables_paginate .paginate_button {
	padding: 0px;
	margin-left: 0px;
	display: inline;
	border: 0px;
}

.location {
	position: relative;
	bottom: 43px;
}
</style>

</head>
<body>
	<!-- ======= Main ======= -->
	<main id="main" class="main" layout:fragment="content">

		<div class="pagetitle">
			<h1>전자결재</h1>
			<nav>
				<ol class="breadcrumb">
					<li class="breadcrumb-item active">나의 신청</li>
					<li class="breadcrumb-item"><a href="approval">나의 승인</a></li>
					<li class="breadcrumb-item" th:if = "${session.auth == 'ADMIN'}"><a href="aprvAdmin">관리 기능</a></li>
				</ol>
			</nav>
		</div>
		<!-- End Page Title -->

		<!-- ======= Sectionn ======= -->
		<section class="section">

			<div class="card">
				<div class="card-body">
					<br>
					<!-- Bordered Tabs -->
					<ul class="nav nav-tabs nav-tabs-bordered" id="borderedTab"
						role="tablist">
						<li class="nav-item" role="presentation">
							<button class="nav-link active" id="list-tab"
								data-bs-toggle="tab" data-bs-target="#bordered-list"
								type="button" role="tab" aria-controls="list"
								aria-selected="true">결재상태보기</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="write-tab" data-bs-toggle="tab"
								data-bs-target="#bordered-write" type="button" role="tab"
								aria-controls="write" aria-selected="false">결재신청하기</button>
						</li>
					</ul>

					<div class="tab-content pt-2" id="borderedTabContent">
						<div class="tab-pane fade show active" id="bordered-list"
							role="tabpanel" aria-labelledby="list-tab">
							<!-- List Tabs -->

							<!-- Default Card -->
							<div class="card">
								<div class="card-body">
									<h5 class="card-title">결재신청목록</h5>
									<p class="card-text">
										내가 신청한 결재목록입니다.<br> 결재 문서를 수정하거나 진행 상황 및 반려 사유를 확인할 수
										있습니다.
									</p>

								</div>
							</div>
							<!-- End Default Card -->


							<ul class="nav nav-tabs" id="myTab1" role="tablist">

								<li class="nav-item" role="presentation" th:each="c, st:${cd}">
									<button class="nav-link"
										th:classappend="${st.index == 0 ? active : _ }"
										th:id="aprv-tab" data-bs-toggle="tab"
										th:data-bs-target="#aprv" type="button" role="tab"
										th:aria-controls="#aprv"
										th:aria-selected="${st.index == 0 ? 'true' : 'false' }"
										th:text="${c.cdNm}">진행</button>
								</li>

							</ul>
							<div class="tab-content pt-2" id="myTab1Content">
								<div class="tab-pane fade show active"
									id="aprv" role="tabpanel"
									aria-labelledby="aprv-tab">


									<table id="aprvTable" class="table table-hover">
										<thead hidden="hidden">
											<tr>
												<th>결재번호</th>
												<th>제목</th>
												<th>작성일자</th>
												<th>결재상태</th>
											</tr>
										</thead>
										<tbody id="tb">
											<tr th:each="a : ${aprvList}">
												<td scope="row" th:text="${a.aprvNo}">결재번호</td>
												<td th:text="${a.ttl}" class="select"
													th:attr="data-no=${a.aprvNo}">제목</td>
												<td th:text="${a.dttm}">2022-02-10</td>
												<td th:text="${a.aprvSt}">결재완료</td>
											</tr>
										</tbody>
									</table>


								</div>

								<div>
									<form id="frm" method="post" action="aprvSelect">
										<input type="hidden" th:name="${_csrf.parameterName}"
											th:value="${_csrf.token}"> <input type="hidden"
											id="aprvNo" name="aprvNo">
									</form>
								</div>

							</div>


							<!-- End List Tabs -->
						</div>

						<div class="tab-pane fade" id="bordered-write" role="tabpanel"
							aria-labelledby="write-tab">
							<!-- Write Tabs -->


							<!-- Default Card -->
							<div class="card">
								<div class="card-body">
									<h5 class="card-title">기본서식 목록</h5>
									<p class="card-text">
										결재 서식목록입니다.<br> 서식을 클릭하시면 해당 양식으로 간편하게 결재문서를 작성할 수 있습니다.
									</p>
									<button type="button" class="btn btn-primary">
										<i class="bi bi-star me-1" data-bs-toggle="modal"
											data-bs-target="#scrollingModal">새 서식으로 작성</i>
									</button>
								</div>
							</div>
							<!-- End Default Card -->



							<!-- Default Tabs -->
							<ul class="nav nav-tabs" id="myTab2" role="tablist">
								<li class="nav-item" role="presentation">
									<button class="nav-link active" id="formAll-tab"
										data-bs-toggle="tab" data-bs-target="#formAll" type="button"
										role="tab" aria-controls="formAll" aria-selected="true">전체</button>
								</li>
								<li class="nav-item" role="presentation">
									<button class="nav-link" id="confer-tab" data-bs-toggle="tab"
										data-bs-target="#confer" type="button" role="tab"
										aria-controls="confer" aria-selected="false">품의관련</button>
								</li>
								<li class="nav-item" role="presentation">
									<button class="nav-link" id="request-tab" data-bs-toggle="tab"
										data-bs-target="#request" type="button" role="tab"
										aria-controls="request" aria-selected="false">신청관련</button>
								</li>
								<li class="nav-item" role="presentation">
									<button class="nav-link" id="report-tab" data-bs-toggle="tab"
										data-bs-target="#report" type="button" role="tab"
										aria-controls="report" aria-selected="false">보고관련</button>
								</li>
								<li class="nav-item" role="presentation">
									<button class="nav-link" id="affair-tab" data-bs-toggle="tab"
										data-bs-target="#affair" type="button" role="tab"
										aria-controls="affair" aria-selected="false">총무관련</button>
								</li>
								<li class="nav-item" role="presentation">
									<button class="nav-link" id="pInfo-tab" data-bs-toggle="tab"
										data-bs-target="#pInfo" type="button" role="tab"
										aria-controls="pInfo" aria-selected="false">개인정보</button>
								</li>
							</ul>
							<div class="tab-content pt-2" id="myTab2Content">
								<div class="tab-pane fade show active" id="formAll"
									role="tabpanel" aria-labelledby="formAll-tab">
									전체서식
									<!-- Table with hoverable rows -->
									<table class="table table-hover">
										<thead>
											<tr>
												<th scope="col">#</th>
												<th scope="col">Name</th>
												<th scope="col">Position</th>
												<th scope="col">Age</th>
												<th scope="col">Start Date</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<th scope="row">1</th>
												<td>Brandon Jacob</td>
												<td>Designer</td>
												<td>28</td>
												<td>2016-05-25</td>
											</tr>
											<tr>
												<th scope="row">2</th>
												<td>Bridie Kessler</td>
												<td>Developer</td>
												<td>35</td>
												<td>2014-12-05</td>
											</tr>
											<tr>
												<th scope="row">3</th>
												<td>Ashleigh Langosh</td>
												<td>Finance</td>
												<td>45</td>
												<td>2011-08-12</td>
											</tr>
											<tr>
												<th scope="row">4</th>
												<td>Angus Grady</td>
												<td>HR</td>
												<td>34</td>
												<td>2012-06-11</td>
											</tr>
											<tr>
												<th scope="row">5</th>
												<td>Raheem Lehner</td>
												<td>Dynamic Division Officer</td>
												<td>47</td>
												<td>2011-04-19</td>
											</tr>
										</tbody>
									</table>
									<!-- End Table with hoverable rows -->


								</div>
								<div class="tab-pane fade" id="confer" role="tabpanel"
									aria-labelledby="confer-tab">
									품의서식

									<!-- Table with hoverable rows -->
									<table class="table table-hover">
										<thead>
											<tr>
												<th scope="col">#</th>
												<th scope="col">Name</th>
												<th scope="col">Position</th>
												<th scope="col">Age</th>
												<th scope="col">Start Date</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<th scope="row">1</th>
												<td>Brandon Jacob</td>
												<td>Designer</td>
												<td>28</td>
												<td>2016-05-25</td>
											</tr>
											<tr>
												<th scope="row">2</th>
												<td>Bridie Kessler</td>
												<td>Developer</td>
												<td>35</td>
												<td>2014-12-05</td>
											</tr>
											<tr>
												<th scope="row">3</th>
												<td>Ashleigh Langosh</td>
												<td>Finance</td>
												<td>45</td>
												<td>2011-08-12</td>
											</tr>
											<tr>
												<th scope="row">4</th>
												<td>Angus Grady</td>
												<td>HR</td>
												<td>34</td>
												<td>2012-06-11</td>
											</tr>
											<tr>
												<th scope="row">5</th>
												<td>Raheem Lehner</td>
												<td>Dynamic Division Officer</td>
												<td>47</td>
												<td>2011-04-19</td>
											</tr>
										</tbody>
									</table>
									<!-- End Table with hoverable rows -->

								</div>
								<div class="tab-pane fade" id="request" role="tabpanel"
									aria-labelledby="request-tab">
									신청서식
									<!-- Table with hoverable rows -->
									<table class="table table-hover">
										<thead>
											<tr>
												<th scope="col">#</th>
												<th scope="col">Name</th>
												<th scope="col">Position</th>
												<th scope="col">Age</th>
												<th scope="col">Start Date</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<th scope="row">1</th>
												<td>Brandon Jacob</td>
												<td>Designer</td>
												<td>28</td>
												<td>2016-05-25</td>
											</tr>
											<tr>
												<th scope="row">2</th>
												<td>Bridie Kessler</td>
												<td>Developer</td>
												<td>35</td>
												<td>2014-12-05</td>
											</tr>
											<tr>
												<th scope="row">3</th>
												<td>Ashleigh Langosh</td>
												<td>Finance</td>
												<td>45</td>
												<td>2011-08-12</td>
											</tr>
											<tr>
												<th scope="row">4</th>
												<td>Angus Grady</td>
												<td>HR</td>
												<td>34</td>
												<td>2012-06-11</td>
											</tr>
											<tr>
												<th scope="row">5</th>
												<td>Raheem Lehner</td>
												<td>Dynamic Division Officer</td>
												<td>47</td>
												<td>2011-04-19</td>
											</tr>
										</tbody>
									</table>
									<!-- End Table with hoverable rows -->


								</div>
								<div class="tab-pane fade" id="report" role="tabpanel"
									aria-labelledby="report-tab">
									보고서식

									<!-- Table with hoverable rows -->
									<table class="table table-hover">
										<thead>
											<tr>
												<th scope="col">#</th>
												<th scope="col">Name</th>
												<th scope="col">Position</th>
												<th scope="col">Age</th>
												<th scope="col">Start Date</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<th scope="row">1</th>
												<td>Brandon Jacob</td>
												<td>Designer</td>
												<td>28</td>
												<td>2016-05-25</td>
											</tr>
											<tr>
												<th scope="row">2</th>
												<td>Bridie Kessler</td>
												<td>Developer</td>
												<td>35</td>
												<td>2014-12-05</td>
											</tr>
											<tr>
												<th scope="row">3</th>
												<td>Ashleigh Langosh</td>
												<td>Finance</td>
												<td>45</td>
												<td>2011-08-12</td>
											</tr>
											<tr>
												<th scope="row">4</th>
												<td>Angus Grady</td>
												<td>HR</td>
												<td>34</td>
												<td>2012-06-11</td>
											</tr>
											<tr>
												<th scope="row">5</th>
												<td>Raheem Lehner</td>
												<td>Dynamic Division Officer</td>
												<td>47</td>
												<td>2011-04-19</td>
											</tr>
										</tbody>
									</table>
									<!-- End Table with hoverable rows -->


								</div>
								<div class="tab-pane fade" id="affair" role="tabpanel"
									aria-labelledby="affair-tab">
									총무서식

									<!-- Table with hoverable rows -->
									<table class="table table-hover">
										<thead>
											<tr>
												<th scope="col">#</th>
												<th scope="col">Name</th>
												<th scope="col">Position</th>
												<th scope="col">Age</th>
												<th scope="col">Start Date</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<th scope="row">1</th>
												<td>Brandon Jacob</td>
												<td>Designer</td>
												<td>28</td>
												<td>2016-05-25</td>
											</tr>
											<tr>
												<th scope="row">2</th>
												<td>Bridie Kessler</td>
												<td>Developer</td>
												<td>35</td>
												<td>2014-12-05</td>
											</tr>
											<tr>
												<th scope="row">3</th>
												<td>Ashleigh Langosh</td>
												<td>Finance</td>
												<td>45</td>
												<td>2011-08-12</td>
											</tr>
											<tr>
												<th scope="row">4</th>
												<td>Angus Grady</td>
												<td>HR</td>
												<td>34</td>
												<td>2012-06-11</td>
											</tr>
											<tr>
												<th scope="row">5</th>
												<td>Raheem Lehner</td>
												<td>Dynamic Division Officer</td>
												<td>47</td>
												<td>2011-04-19</td>
											</tr>
										</tbody>
									</table>
									<!-- End Table with hoverable rows -->

								</div>
								<div class="tab-pane fade" id="pInfo" role="tabpanel"
									aria-labelledby="pInfo-tab">
									개인정보

									<!-- Table with hoverable rows -->
									<table class="table table-hover">
										<thead>
											<tr>
												<th scope="col">#</th>
												<th scope="col">Name</th>
												<th scope="col">Position</th>
												<th scope="col">Age</th>
												<th scope="col">Start Date</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<th scope="row">1</th>
												<td>Brandon Jacob</td>
												<td>Designer</td>
												<td>28</td>
												<td>2016-05-25</td>
											</tr>
											<tr>
												<th scope="row">2</th>
												<td>Bridie Kessler</td>
												<td>Developer</td>
												<td>35</td>
												<td>2014-12-05</td>
											</tr>
											<tr>
												<th scope="row">3</th>
												<td>Ashleigh Langosh</td>
												<td>Finance</td>
												<td>45</td>
												<td>2011-08-12</td>
											</tr>
											<tr>
												<th scope="row">4</th>
												<td>Angus Grady</td>
												<td>HR</td>
												<td>34</td>
												<td>2012-06-11</td>
											</tr>
											<tr>
												<th scope="row">5</th>
												<td>Raheem Lehner</td>
												<td>Dynamic Division Officer</td>
												<td>47</td>
												<td>2011-04-19</td>
											</tr>
										</tbody>
									</table>

								</div>
							</div>
							<!-- End Default Tabs -->




							<!-- End Write Tabs -->
						</div>
					</div>
					<!-- End Bordered Tabs -->

				</div>
			</div>







		</section>


		<!-- Scrolling Modal -->

		<div class="modal fade" id="scrollingModal" tabindex="-1"
			data-bs-backdrop="false">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Scrolling Modal</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<div class="modal-body" style="min-height: 750px;">Non omnis
						incidunt qui sed occaecati magni asperiores est mollitia.</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">Close</button>
						<button type="button" class="btn btn-primary">Save
							changes</button>
					</div>
				</div>
			</div>
		</div>

		<!-- End Scrolling Modal-->






	</main>
	<!-- End #main -->
</body>
</html>