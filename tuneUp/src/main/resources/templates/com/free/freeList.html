<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="/js/jquery-3.6.1.min.js"></script>

<!--  
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs5/dt-1.12.1/datatables.min.css"/>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs5/dt-1.12.1/datatables.min.js"></script>-->

<script>
	$(function(){
		freeSelect();
		
		//datatables
		/* let freeDt = $('#freeTable').DataTable({
			ajax: {
				url: 'freeAjaxList',
				dataSrc: ''
			},
			columns: [
				{data: 'ttl'},
				{data: 'wrtr'},
				{data: 'writeDt'},
				{data: 'hit'}
			]
		});
		freeDt.on('select', function(e,dt,type,indexes){
			console.log(type);
			console.log(indexes);
		}); */
		
		
		
	/* $.ajax({
			url:'freeAjaxList',
			dataType:'json',
			success:function(data){
				console.log("게시글:"+data)
				
				$("#freeTable").dataTable({
					data:data,
					colums: [
						{data:"ttl"},
						{data:"wrtr"},
						{data:"writeDt"},
						{data:"hit"}
					],
					//컬럼 넓이
					columnDefs: [
						{targets:1, width:400},
						{targets:2, width:50},
						{targets:3, width:50},
						{targets:4, width:30}
					],
					//표시 건수 기능 숨기기
					lengthChange: false,
					//정렬 기능 숨기기
					ordering: false,
					//정보 표시 숨기기
					info: false
				})
			}
		})  */
		
		
		//자유게시판 상세조회
		function freeSelect() {
			$("#tb").on("click", ".select", e=>{
				let no = $(e.target).data("no"); //게시글 번호
				$("#postNo").val(no)
				$("#frm").submit();
			})
		}
		
	} );
</script>
<style>
  /* .dataTables_wrapper .dataTables_paginate .paginate_button {
    padding : 0px;
    margin-left: 0px;
    display: inline;
    border: 0px;
	} */
	.location{
		position: relative;
		bottom: 43px;
	}
</style>
</head>
<body>
	<main layout:fragment="content">
		<div class="card">
            <div class="card-body">
              <h5 class="card-title"></h5>
				<!-- Start Page Title -->
				<div class="pagetitle">
			      <h1>자유게시판</h1>
			    </div>
			    <!-- End Page Title -->
			    
			    <!-- 자유게시판 게시글 리스트 -->
				<div>
					<table id="freeTable" class="table table-borderless datatable">
						<thead>
							<tr>
								<th scope="col"><i class="ri-bill-line"></i></th>
								<th scope="col">제목</th>
								<th scope="col">작성자</th>
								<th scope="col">작성일자</th>
								<th scope="col">조회수</th>
							</tr>
						</thead>
						<tbody id="tb">
							<tr th:each="n : ${noticeList}" th:classappend="${n.emerg} == '1' ? 'emerg'">
								<td><i th:classappend="${n.emerg} == '1' ? 'ri-alarm-warning-fill' : 'ri-alarm-warning-line'"></i></td>
								<td class="select" th:attr="data-no=${n.postNo}">
									<b><span th:if="${n.emerg}=='1'">[긴급공지]</span></b>&nbsp;[[${n.ttl}]]
								</td>
								<td th:text="${n.wrtr}">관리자</td>
								<td th:text="${n.writeDt}">2022-02-10</td>
								<td th:text="${n.hit}">0</td>
							</tr>
						</tbody>
					</table>
					<a href="freeInsertForm" class="btn btn-primary location">글쓰기</a>
				</div>
			</div>
		</div>
		<div>
			<form id="frm" method="post" action="freeSelect">
				<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
				<input type="hidden" id="postNo" name="postNo">
			</form>
		</div>
		
		
		
		<table class="table table-borderless datatable">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Customer</th>
                        <th scope="col">Product</th>
                        <th scope="col">Price</th>
                        <th scope="col">Status</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row"><a href="#">#2457</a></th>
                        <td>Brandon Jacob</td>
                        <td><a href="#" class="text-primary">At praesentium minu</a></td>
                        <td>$64</td>
                        <td><span class="badge bg-success">Approved</span></td>
                      </tr>
                      <tr>
                        <th scope="row"><a href="#">#2147</a></th>
                        <td>Bridie Kessler</td>
                        <td><a href="#" class="text-primary">Blanditiis dolor omnis similique</a></td>
                        <td>$47</td>
                        <td><span class="badge bg-warning">Pending</span></td>
                      </tr>
                      <tr>
                        <th scope="row"><a href="#">#2049</a></th>
                        <td>Ashleigh Langosh</td>
                        <td><a href="#" class="text-primary">At recusandae consectetur</a></td>
                        <td>$147</td>
                        <td><span class="badge bg-success">Approved</span></td>
                      </tr>
                      <tr>
                        <th scope="row"><a href="#">#2644</a></th>
                        <td>Angus Grady</td>
                        <td><a href="#" class="text-primar">Ut voluptatem id earum et</a></td>
                        <td>$67</td>
                        <td><span class="badge bg-danger">Rejected</span></td>
                      </tr>
                      <tr>
                        <th scope="row"><a href="#">#2644</a></th>
                        <td>Raheem Lehner</td>
                        <td><a href="#" class="text-primary">Sunt similique distinctio</a></td>
                        <td>$165</td>
                        <td><span class="badge bg-success">Approved</span></td>
                      </tr>
                    </tbody>
                  </table>
	</main>
</body>
</html>