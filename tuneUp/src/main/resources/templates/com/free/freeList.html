<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="/js/jquery-3.6.1.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/v/dt/dt-1.11.4/r-2.2.9/datatables.min.css"/>
<script src="https://cdn.datatables.net/v/dt/dt-1.11.4/r-2.2.9/datatables.min.js"></script>

<!--  -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs5/dt-1.12.1/datatables.min.css"/>
 
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs5/dt-1.12.1/datatables.min.js"></script>
<script>
	$(document).ready(function() {
		noticeSelect();
		
		//datatables
		$('#freeTable').DataTable({
			//컬럼 갯수
			colums: [
				{data:"icon"},
				{data:"title"},
				{data:"write"},
				{data:"wdate"},
				{data:"hit"}
			],
			//컬럼 넓이
			columnDefs: [
				{targets:0, width:20},
				{targets:1, width:400},
				{targets:2, width:50},
				{targets:3, width:50},
				{targets:4, width:30}
			],
			//표시 건수 기능 숨기기
			lengthChange: false,
			//정렬 기능 숨기기
			ordering: false,
			//정보 표시 숨기기
			info: false
		});
		
		//자유게시판 상세조회
		function noticeSelect() {
			$("#tb").on("click", ".select", e=>{
				let no = $(e.target).data("no"); //게시글 번호
				$("#postNo").val(no)
				$("#frm").submit();
			})
		}
		
	} );
</script>
<style>
  .dataTables_wrapper .dataTables_paginate .paginate_button {
    padding : 0px;
    margin-left: 0px;
    display: inline;
    border: 0px;
	}
	.location{
		position: relative;
		bottom: 43px;
	}
</style>
</head>
<body>
	<main layout:fragment="content">
		<div class="card">
            <div class="card-body">
              <h5 class="card-title"></h5>
				<!-- Start Page Title -->
				<div class="pagetitle">
			      <h1>자유게시판</h1>
			    </div>
			    <!-- End Page Title -->
			    
				<div>
					<table id="freeTable" class="display">
						<thead>
							<tr>
								<th><i class="ri-bill-line"></i></th> 
								<th>제목</th>
								<th>작성자</th>
								<th>작성일자</th>
								<th>조회수</th>
							</tr>
						</thead>
						<tbody id="tb">
							<tr th:each="f : ${freeList}">
								<td><i class="ri-bill-line"></i></td>
								<td th:text="${f.ttl}" class="select" th:attr="data-no=${f.postNo}">자유게시판</td>
								<td th:text="${f.wrtr}">사원이름</td>
								<td th:text="${f.writeDt}">2022-02-10</td>
								<td th:text="${f.hit}">0</td>
							</tr>
						</tbody>
					</table>
					<a href="freeInsertForm" class="btn btn-primary location">글쓰기</a>
				</div>
			</div>
		</div>
		<div>
			<form id="frm" method="post" action="freeSelect">
				<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
				<input type="hidden" id="postNo" name="postNo">
			</form>
		</div>
	</main>
</body>
</html>